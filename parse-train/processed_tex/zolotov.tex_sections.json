{
    "sections": {
        "title": "On decidability of the theory with the transitive closure operator",
        "abstract": "In this paper we consider a theory of integers with the successor function, divisibility predicates, equality and a transitive closure operator. The order relation can be expressed in this theory using the transitive closure operator.\n\nWe prove that given a formula with the transitive closure operator on a single pair of variables one can effectively eliminate it.",
        "author": "Alexander S.\\,Zolotov",
        "email": "yesbody2@gmail.com",
        "shorttit": "On decidability of the theory with the transitive...",
        "keywords": "decidability problem, transitive closure",
        "introduction": "\nThe decidability problem is one of the most important problems of mathematical logic. There are classical results concerning this problem. One of the first undecidable theories were found by Church (see \\cite{church_1},\\cite{church_2},\\cite{boolos}) and Rosser (see \\cite{rosser}). In 1929 Presburger proved that arithmetic without multiplication is decidable. An effective quantifier elimination method was employed. Given a formula $\\exists x \\phi $, a new formula $\\psi \\equiv \\exists x \\phi$ without quantifiers is effectively constructed.\n\nIt's well known that the transitive closure can not be expressed in relational algebra (see \\cite{aho_ulman}). So one can extend some first order theory with the transitive closure operator and consider its decidability.\n\nWe consider a first order theory of integers with an unary successor function $s(x)$, divisibility predicates $D_p(x)$, equality and a transitive closure operator.\n\nAn applying of the transitive closure operator to formulas containing only equality and divisibility predicates is considered in \\cite{zolotov1}. It's easy to prove that the transitive closure operator on two pairs of variables makes it possible to express addition and multiplication of integers. Thus the transitive closure operator on two pairs of variables makes the theory undecidable.\n\nIn this paper we consider the transitive closure operator on a single pair of variables.\n",
        "conclusion": "",
        "acknowledgements": "",
        "main_part": [
            "\\begin{definition}\nLet $\\psi( \\bar{x},\\bar{y})$ be a formula, tuples $\\bar{x}$ and $\\bar{y}$  have the same length. Then $T_{\\bar{x},\\bar{y}}\\left(\\psi\\left(\\bar{x},\\bar{y}\\right)\\right)$ is also a formula called \\textbf{\\textit{transitive closure}} of $\\psi\\left( \\bar{x},\\bar{y}\\right)$ on $\\bar{x},\\bar{y}$. A value of an individual variable $x$ is denoted by $I(x)$.\n\nA formula $T_{\\bar{x},\\bar{y}}\\left(\\psi\\left(\\bar{x},\\bar{y}\\right)\\right)$ is true iff $I(\\bar{x}) = I(\\bar{y})$ or there is a sequence of tuples $\\bar{a}_1, \\dots, \\bar{a}_n$ such that $\n\\psi(\\bar{a}_1,\\bar{a}_2) \\wedge \\psi(\\bar{a}_2,\\bar{a}_3) \\wedge \\dots \\wedge \\psi(\\bar{a}_{n-1} ,\\bar{a}_n)$, and $I(\\bar{x})=\\bar{a}_1, I(\\bar{y})=\\bar{a}_n.\n$\nWe call the sequence $\\bar{a}_1, \\dots, \\bar{a}_n$ and a formula\n$\n\\psi(\\bar{x}_1,\\bar{x}_2) \\wedge \\psi(\\bar{x}_2,\\bar{x}_3) \\wedge \\dots \\wedge \\psi(\\bar{x}_{n-1} ,\\bar{x}_n)\\wedge \\bar{x}=\\bar{x}_1\\wedge \\bar{y}=\\bar{x}_n\n$\nsuch that\n$\n\\psi(\\bar{a}_1,\\bar{a}_2) \\wedge \\psi(\\bar{a}_2,\\bar{a}_3) \\wedge \\dots \\wedge \\psi(\\bar{a}_{n-1} ,\\bar{a}_n)\n$\n \\textbf{\\textit{a path}} from $\\bar{a}_1$ to $\\bar{a}_n$ with \\textbf{\\textit{a link}} $\\psi$. We call $\\bar{a}_1,\\dots,\\bar{a}_n$ path \\textbf{\\textit{nodes}}. We say that this path \\textbf{\\textit{proves}} $T_{\\bar{x},\\bar{y}}\\left(\\psi\\left(\\bar{x},\\bar{y}\\right)\\right)$ with $I(\\bar{x}) = \\bar{a}_1$ and $I(\\bar{y}) = \\bar{a}_n$.\n\\end{definition}\nAn expression $\\underbrace{s(s(\\dots s}_{k \\text{ times}}(x)\\dots)$ is be denoted by $s^k(x)$.\n",
            "\nOur main technical result can be represented with the following\n\\begin{lemma}\\label{lemma:distGeneral}\nFormula\n\\begin{small}\n\\begin{multline*}\nT_{x,y}\\Bigg(\n\\bigg[\\bigvee\\limits_{j=1}^{M_1} x< s^{t_j}(y) \\wedge D_p(s^{a_j}(x)) \\wedge D_p(s^{b_j}(y))\\bigg]\n\\vee\n\\displaybreak[0]\n\\\\\n\\vee\n\\bigg[\\bigvee\\limits_{j=1}^{M_2} x> s^{t'_j}(y) \\wedge D_p(s^{a'_j}(x)) \\wedge D_p(s^{b'_j}(y))\\bigg]\n\\vee\n\\bigg[\\bigvee\\limits_{i=1}^N x = s^{k_i}(y) \\wedge D_p(s^{m_i}(x))\\bigg]\n\\Bigg),\n\\nonumber\n\\end{multline*}\n\\end{small}\nwhere $p>\\max\\limits_i |k_i|$ is true iff there is a path and all of the path nodes are contained in\n$(\\min(I(x),I(y)) - h, \\max(I(x),I(y)) + h)$, $h=p (p^2+p (M_1 + M_2)+1)$\n\\end{lemma}\\begin{proof}\nLet the transitive closure be true. Then there is a path $C$ without repeats. Let $a_{min}$ be the least node of $C$. Assume that $I(x)<I(y)$. If $a_{min} =I(x)$, then all of the path nodes are greater than $I(x)$. They are also greater than $I(x)-h$. If $a_{min}<I(x)$, then construct non-intersecting segments of length $p$ from $I(x)$ to $a_{min}$. Let $r$ be the amount of these segments. Let's enumerate them from right to left. There is a node $u$ in $C$ such that $I(x)<u$ and number of $u$ is greater than number of $a_{min}$ in the path $C$. Divide the path part from $I(x)$ to $u$ in two.The first part is from $I(x)$ to $a_{min}$ and the second part is from $a_{min}$ to $u$. Let these parts be denoted by $C'$ and $C''$ respectively.\n\nConsider the nodes of $C'$ and extract a monotone decreasing subsequence $(b_i)_{i=1}^{q_1}$ such that $b_1 = I(x)$ and  $b_{i+1}$ is a node less than $b_{i}$ with the least number. The last element of this subsequence is $a_{min}$. Extract a monotone increasing subsequence $(c_i)_{i=1}^{q_2}$ from the nodes of $C''$ such that $c_1 = a_{min}$ and $c_{i+1}$ is a node greater than $c_{i}$ with the least number. If $b_i<b_j$, then number of $b_i$ in $C'$ is greater than number of $b_j$ in $C'$. Similarly if $c_i>c_j$, then number of $c_i$ in $C''$ is greater than number of $c_j$ in $C''$.\nIf there is no element of $(b_i)$ in some segment, then there is a ``greater than'' link in $C'$ such that all of the path nodes before this link are to the right of this segment. Then the path skipped this segment possibly returning to it afterwards. Similarly if there is no element of $(c_i)$ in some segment, then there is a ``less than'' link in $C''$ such that all of the path nodes before the link are to the left of this segment. Then the path skipped this segment possibly returning to it afterwards. Therefore the paths $C'$ and $C''$ can be shortened by shifting appropriate path nodes by $p$. Such shift does not change the remainder of the division by $p$.\n\nWe can assume that there are no empty segments. Consider a segment such that it has at least one element from $(b_i)$, it has no elements from $(c_i)$. If there are at least $p M_2$ such segments, then there is a pair of segments $o_{i_1}, o_{i_2}, (i_1<i_2)$ such that elements $w_1\\in o_{i_1}$ and $w_2\\in o_{i_2}$ from $(b_i)$ and $|w_1-w_2|$ is divisible by $p$ and the path $C''$ skips these segments using either a single link or the same link twice. If the same link was used twice, then it can be replaced with a single link due to the sequence monotonicity. The node after this link can be shifted by $p$. Therefore both $C'$ and $C''$ can be shortened reducing number of segments between $I(x)$ and $a_{min}$. The remaining case is considered in \\cite{zolotov1}.\n\nIt can be shown that similar manipulations can be performed in case there is at least one element from $(c_i)$ but there is no element from $(b_i)$ in the segment in order to shorten the path. One can shorten the right part of the path between $I(y)$ and $a_{max}$ if necessary. Every operation reduces total sum of distances between neighboring nodes. It means that this process eventually ends. It's easy so see that such kind of operations can be performed till there are more than $p^2 + p M_1+ p M_2$ segments concerned.\n\nIn case $I(x)\\geq I(y)$ the shortening procedure is similar.\n\\end{proof}\\begin{remark}\\label{remark:less}\nConsider\n\\begin{equation}\nx<s^{k}(y) \\wedge D_p(s^a (x)) \\wedge D_p(s^b (y)) \\label{eq:less}\n\\end{equation}\nand let\n$\nd = \\Big[\\frac{b-a-k}{p}\\Big]+1.\n$\nThe least $I(y)$ satisfying (\\ref{eq:less}) is $I(y)=I(x)+a-b+dp$. Let (\\ref{eq:less}) be true and $b=I(x)+a-b+dp$. Then $I(y)\\geq b$ and $I(y)$ and $b$ are equivalent modulo $p$.\n\\end{remark}\\begin{remark}\\label{remark:greater}\nSimilarly one can consider\n$\nx>s^{k}(y) \\wedge D_p(s^a (x)) \\wedge D_p(s^b (y)).\n$\nThe constant\n$\nd =\n\\begin{cases}\n\\Big[\\frac{b-a-k}{p}\\Big]-1,&\\text{ if } p \\text{ divides } (b-a-k),\\\\\n\\Big[\\frac{b-a-k}{p}\\Big],&\\text{otherwise}.\n\\end{cases}\n$\n\\end{remark}\\begin{lemma}\\label{lemma:less}\\label{lemma:first}\nFor a formula\n\\begin{small}\n\\begin{multline}\\label{eq:lemma2:original}\\tag{1}\nT_{x,y}\\Bigg(\n\\underbrace{\n\\left[\\bigvee\\limits_{j=1}^{M_1} x< s^{t_j}(y) \\wedge D_p(s^{a_j}(x)) \\wedge D_p(s^{b_j}(y))\\right]\n}_{(2)}\n\\vee\n%\\\\\n%\\vee\n\\underbrace{\\left[\\bigvee\\limits_{i=1}^N x = s^{k_i}(y) \\wedge D_p(s^{m_i}(x))\\right]}_{(3)}\n\\Bigg)\n\\end{multline}\n\\end{small}\nthere is an equivalent formula without order relations inside the transitive closure operator.\n\\end{lemma}\\begin{proof}\nSubstitute all of the order relations from $(1)$ with equality according to remark \\ref{remark:less} and build a formula\n\\begin{small}\n\\begin{multline*}\n\\Phi(x,y) \\equiv \\Bigg(\n\\underbrace{\n\\left[\\bigvee\\limits_{j=1}^{M_1} y = s^{a_j-b_j+d_j p}(x) \\wedge D_p(s^{a_j}(x))\\right]\n}_{(4)}\n\\vee\n%\\\\\n%\\vee\n\\underbrace{\\left[\\bigvee\\limits_{i=1}^N x = s^{k_i}(y) \\wedge D_p(s^{m_i}(x))\\right]}_{(5)}\n\\Bigg).\n\\end{multline*}\n\\end{small}\nConsider a formula\n\\begin{small}\n\\begin{multline}\\label{eq:lemma2:constructed}\\tag{11}\n\\underbrace{T_{x,y}\\left[\\bigvee\\limits_{i=1}^N x = s^{k_i}(y) \\wedge D_p(s^{m_i}(x))\\right]}_{(6)}\n\\vee\n\\exists z \\Bigg(\\exists u \\exists v\n\\Bigg(\n\\overbrace{T_{x,u}\\left(\\Phi(x,u)\\right)}^{(8)}\\wedge\n\\displaybreak[0]\n\\\\\n\\wedge\n\\overbrace{T_{v,z}\\left(\\Phi(v,z)\\right)}^{(9)}\n\\wedge\n\\Bigg(\n\\underbrace{\n\\left[\\bigvee\\limits_{j=1}^{M_1} u = s^{a_j-b_j+d_j p}(v) \\wedge D_p(s^{a_j}(u))\\right]\n}_{(10)}\n\\wedge\n\\displaybreak[0]\n\\\\\n\\wedge\n\\underbrace{\\left(\\bigvee_{i=0}^{p-1} D_p(s^i(z))\\wedge D_p(s^i(y)) \\right)\\wedge z\\leq y}_{(7)}\n\\Bigg)\n\\Bigg)\n\\Bigg).\n\\end{multline}\n\\end{small}\nWe prove \\eqref{eq:lemma2:constructed} is equivalent to  \\eqref{eq:lemma2:original}. Let \\eqref{eq:lemma2:original} be true. Let $C$ be its path. If there are no order links in $C$, then it also proves $(6)$. Otherwise we build a path $C'$ by replacing all order links from $C$ with corresponding equality links. We also shift the nodes. Let $I(u)$ and $I(v)$ be any pair of nodes connected with a link from $(10)$ in $C'$. Note that $C'$ proves $(8)-(10)$. According to remark \\ref{remark:less} the formula $(7)$ is also true.\n\nLet the formula \\eqref{eq:lemma2:constructed} be true. If $(6)$ is true, then the formula \\eqref{eq:lemma2:original} is also true. Otherwise there are paths $C_1'$ and $C_2'$ proving $(8)$ and $(9)$ respectively. Both paths can be empty. Construct a new path $C$ by appending a link $(10)$ after $C_1'$ and appending $C_2'$ afterwards. Then replace every non-last occurrence of any link from $(10)$ in $C$ with corresponding order link without shifting the nodes. It's possible due to remark \\ref{remark:less}. Replace the last occurrence with the corresponding order link and shift the last node to make it equal to $I(y)$. It's possible due to $(7)$. Note that the result path proves the formula \\eqref{eq:lemma2:original}.\n\\end{proof}\\begin{lemma}\nFor a formula\n\\begin{small}\n\\begin{multline}\\tag{12}\\label{eq:lemma3:original}\nT_{x,y}\\Bigg(\n\\underbrace{\n\\left[\\bigvee\\limits_{j=1}^{M_1} x< s^{t_j}(y) \\wedge D_p(s^{a_j}(x)) \\wedge D_p(s^{b_j}(y))\\right]\n}_{(\\Phi_1)}\n\\vee\n\\displaybreak[0]\n\\\\\n\\vee\n\\underbrace{\n\\left[\\bigvee\\limits_{j=1}^{M_2} x> s^{t'_j}(y) \\wedge D_p(s^{a'_j}(x)) \\wedge D_p(s^{b'_j}(y))\\right]\n}_{(\\Phi_2)}\n\\vee\n\\displaybreak[0]\n%\\\\\n%\\vee\n\\underbrace{\\left[\\bigvee\\limits_{i=1}^N x = s^{k_i}(y) \\wedge D_p(s^{m_i}(x))\\right]}_{(\\Phi_3)}\n\\Bigg)\n\\end{multline}\n\\end{small}\nthere is an equivalent formula without order relation inside the transitive closure operator.\n\\end{lemma}\\begin{proof}\nDenote $\\Phi_1\\vee\\Phi_2\\vee\\Phi_3$ by $\\Phi$. Note that \\eqref{eq:lemma3:original} is true iff there is a path $C$ and one of the following conditions holds:\n\\renewcommand{\\theenumi}{\\alph{enumi}}\n\\begin{enumerate}%[label=\\alph*]\n\\item\\label{item:first} There are no order links in $C$.\n\\item \\label{item:second}There is at least one occurrence of ``less than'' link in $C$, but there are no ``greater than'' links in it.\n\\item \\label{item:third}There is at least one occurrence of ``greater than'' link in $C$, but there are no ``less than'' links in it.\n\\item \\label{item:fourth}There are occurrences of both ``less than'' and ``greater than'' links in $C$.\n\\end{enumerate}\nConsider each of these conditions.\n\nIf the condition (\\ref{item:first}) holds, a formula\n$\nT_{x,y}\\Big[\\bigvee\\limits_{i=1}^N x = s^{k_i}(y) \\wedge D_p(s^{m_i}(x))\\Big]\n$ is true. Not that it does not contain any order relations.\n\nAccording to lemma \\ref{lemma:less} the condition (\\ref{item:second}) is equivalent to the following formula\n\\begin{small}\n\\begin{multline*}\n\\exists z \\Bigg(\\exists u \\exists v \\Bigg(\nT_{x,u}\\left[\\Phi_1(x,u) \\vee \\Phi_3(x,u)\\right]\n\\wedge\nT_{v,z}\\left[\\Phi_1(v,z)\\vee \\Phi_3(v,z)\\right]\n\\wedge\n\\displaybreak[0]\n\\\\\n\\wedge\n\\Bigg(\n\\left[\\bigvee\\limits_{j=1}^{M_1} u = s^{a_j-b_j+d_j p}(v) \\wedge D_p(s^{a_j}(u))\\right]\n\\wedge\n\\displaybreak[0]\n%\\\\\n%\\wedge\n\\left(\\bigvee_{i=0}^{p-1} D_p(s^i(z))\\wedge D_p(s^i(y)) \\right)\\wedge z\\leq y\\Bigg)\\Bigg)\\Bigg).\n\\end{multline*}\n\\end{small}\nThe condition (\\ref{item:third}) is equivalent to a similar formula as mentioned above, but different in order relation type.\n\nConsider the condition (\\ref{item:fourth}). Replace all order relations from $\\Phi$ with equality according to remarks \\ref{remark:less} and \\ref{remark:greater}, denote the the result formula by $\\Phi'(x,y)$.\nConsider the following formula\n\\begin{small}\n\\begin{align*}\n\\exists z \\Bigg(\\Psi(x,z)\\wedge \\left(\\bigvee_{i=0}^{p-1} D_p(s^i(z))\\wedge D_p(s^i(y)) \\right)\\Bigg),\n\\end{align*}\n\\end{small}\nwhere\n\\begin{small}\n\\begin{multline*}\n\\Psi(x,z) \\equiv \\exists u_1 \\exists v_1 \\exists u_2 \\exists v_2\n\\Bigg( \\bigg[T_{x,u_1}[\\Phi'(x,u_1)] \\bigg] \\wedge\n\\bigg[T_{v_1,u_2}[\\Phi'(v_1,u_2)] \\bigg] \\wedge\n\\displaybreak[0]\n\\\\\n\\wedge\n\\bigg[T_{v_2,z}[\\Phi'(v_2,z)] \\bigg]\n\\wedge \\Bigg[\\bigg(\\Phi'_1(u_1,v_1) \\wedge \\Phi'_2(u_2,v_2)\\bigg)\n\\vee\n\\displaybreak[0]\n%\\\\\n%\\vee\n\\bigg(\\Phi'_2(u_1,v_1) \\wedge \\Phi'_1(u_2,v_2)\\bigg)\n\\Bigg]\n\\Bigg).\n\\end{multline*}\n\\end{small} The formulas $\\Phi'_1$ and $\\Phi'_2$ are constructed by replacing order relations with equality in $\\Phi_1$ and $\\Phi_2$ respectively.\nIt's easy to see that the condition (\\ref{item:fourth}) is equivalent to the formula constructed. If we replace order with equality, then we get a new end of the path equivalent to the original end modulo $p$. The shift itself is undefined as there are both ``less than'' and ``greater than'' links.\n\\end{proof}",
            "\nIn this section we consider transitive closure operator for formulas containing individual variables $x,y,z_1,\\dots,z_n$ where $x,y$ are transitive closure operator parameters. We consider order relation case.\n\\begin{remark}\nIt's easy to see that it's enough to consider non-intersecting intervals as external constraints.\n\\end{remark}\\begin{definition}\nGiven a set of non-intersecting intervals we say the link \\textbf{\\textit{ preserves an interval}} iff both nodes to the left and to the right of the link are in the same interval. We say a link \\textbf{\\textit{does not preserve the interval}} iff these nodes are in different intervals. We also call them \\textbf{\\textit{preserving}} or \\textbf{\\textit{non-preserving}} respectively.\n\\end{definition}\\begin{lemma}\nConsider a formula\n\\begin{small}\n$T_{x,y}\\Big(\\underbrace{\\bigvee\\limits_{j=1}^{N'} \\phi'_{ij}(x,y)\\wedge \\psi'_{ij}}_{(1)}\\Big),$\n\\end{small}\nwhere\n$\\psi'_{ij} \\equiv \\psi'_{i_1 j}\\wedge \\psi'_{i_2 j}$ and $\\psi'_{i_1 j}$ is either $x<z_{i_1}$ , or $z_{i_m}<x$, or a conjunction $(z_{i_j}<x) \\wedge (x<z_{i_{j+1}})$, $\\psi'_{i_2 j}$ is either $y<z_{i_1}$ , or $z_{i_m}<y$, or a conjunction $(z_{i_j}<y) \\wedge (y<z_{i_{j+1}})$ and $\\phi'_{ij}$ does not contain any external constraints. This formula is equivalent to a formula, where the transitive closure operator is applied to some formulas without non-preserving links.\n\\end{lemma}\\begin{proof}\nLet's give a brief overview of the idea behind the proof. Let there be some non-preserving links in $(1)$. Consider the path $C$ of the original formula. There are several options of the way $C$ goes from one interval to another.\n\nThe first one is the following: the equality link $x = s^k(y)$ is used. It means that the path node has to be close to the border of the interval. It means that this link can be used at most $k$ times. Otherwise $C$ has repeats and can be shortened. Therefore this link can be taken away from the transitive closure operator by constructing the appropriate finite disjunction.\n\nThe second option is the following: some order link is used. Assume it is used more than once. The path goes from some point with fixed residue modulo $p$ from the first interval to some point with some (but also fixed) residue modulo $p$ from the second interval. We can assume this link is used only once. A node before the first occurrence of the link can be connected with a node after the last occurrence of the link. Therefore this link can be also taken away from the transitive closure operator.\n\\end{proof}\\begin{lemma}\\label{lemma:last}\nLet $\\xi \\equiv\nT_{x,y}\\Big(\\bigvee_{i=1}^N (\\phi_i(x,y)\\wedge P(x)\\wedge P(y))\\Big)\n$\nand\n%\\\\\n$\n\\chi \\equiv T_{x,y}\\Big(\\bigvee_{i=1}^N (\\phi_i(x,y))\\Big),\n$\nwhere\n$P(x) \\equiv (z_1<x) \\wedge (x<z_2)$ and there are no occurrences of individual variables different from $x,y$ in $\\phi_i(x,y)$. Let there be a constant $h$ such that $\\chi$ is true iff there is a path and all of this path nodes are contained in\n$(\\min(I(x),I(y)) - h, \\max(I(x),I(y)) + h)$. Then there is a formula equivalent to $\\xi$ without occurrences of order relations with $z_1$ or $z_2$ inside the transitive closure operator.\n\\end{lemma}\\begin{proof}\nIt's easy to see that every path begins and ends with nodes from  $(I(z_1),I(z_2))$.\nAssume $|I(z_1)-I(z_2)|\\leq 3h$. Then  $\\bigvee\\limits_{l=1}^{3h} s^l(z_1) = z_2$ is true and every occurrence of $P(x)$ can be replaces with a finite disjunction:\n$$\n\\bigvee\\limits_{l=1}^{3h} \\Bigg(s^l(z_1) = z_2 \\wedge T_{x,y}\\bigg(\\bigvee_{i=1}^N \\bigg[\\phi_i(x,y)\\wedge \\bigvee\\limits_{j=1}^{l-1} x = s^j(z_1)\\wedge \\bigvee\\limits_{j=1}^{l-1} y = s^j(z_1)\\bigg]\\bigg)\\Bigg).\n$$\nNow assume that $|I(z_1)-I(z_2)|>3h$ and consider all of the possible places $I(x)$ and $I(y)$ can take within the interval.\n\nLet $I(z_1)+h \\leq I(x)\\leq I(z_2)-h$, $I(z_1)+h \\leq I(y)\\leq I(z_2)-h$ be true. Then the whole path is within the interval concerned and\n\\begin{small}\n$$\n(x\\geq s^h(z_1))\\wedge (s^h(x)\\leq z_2)\\wedge (y\\geq s^h(z_1)) \\wedge (s^h(y)\\leq z_2) \\wedge T_{x,y}\\bigg(\\bigvee_{i=1}^N (\\phi_i(x,y))\\bigg)\n$$\n\\end{small}\ndenoted by $\\Phi_1$ is true.\n\nLet $q$ be some constant. There is a finite amount of paths with\nlinks  from $\\{\\phi_1,\\dots,\\phi_N\\}$ having $q$ or less nodes,\ndenote this amount by $M_q$ and enumerate them somehow. Let $C_i$ be\na path with number $i$. Consider a formula from $C_i$:\n\\begin{small}\n\\begin{multline*}\n\\phi_{i_1}(x_1,x_2)\\wedge P(x_1)\\wedge P(x_2) \\wedge\n\\dots\n%\\\\\n%\\dots\n \\wedge \\phi_{i_j}(x_{j} ,x_{j+1}) \\wedge P(x_j) \\wedge P(x_{j+1})\\wedge (x =x_1)\\wedge (y=x_{j+1}).\n\\end{multline*}\n\\end{small}\nand construct the following formula\n\\begin{small}\n\\begin{multline*}\n\\exists x_1,\\dots,\\exists x_{j+1}\\big(\\phi_{i_1}(x_1,x_2)\\wedge P(x_1)\\wedge P(x_2) \\wedge\n\\dots\n\\\\\n\\dots\n\\wedge \\phi_{i_j}(x_{j} ,x_{j+1}) \\wedge P(x_j) \\wedge P(x_{j+1})\\wedge (x =x_1)\\wedge (y=x_{j+1})\\big).\n\\end{multline*}\n\\end{small}\nDenote this formula by $\\eta_{i}^q (x,y)$, let $\\Delta_q(x,y) \\equiv \\bigvee\\limits_{i=1}^{M_q}\\eta_i^q(x,y)$.\nLet $I(x)\\in (I(z_1),I(z_1)+h)$ and $I(y) \\in (I(z_1),I(z_1)+h)$. Then we have several options. The path can have $2(h-1)$ or less nodes. Otherwise there is at least one node from $[I(z_1)+h,I(z_2)-h]$. Denote the first such node by $v$ and the last such node by $u$. The path from $I(x)$ to $v$ has $2(h-1)+1$ or less nodes. Similarly the path from $u$ to $I(y)$ has $2(h-1)+1$ or less nodes.\nLet\n\\begin{small}\n\\begin{multline*}\n\\Gamma\\equiv \\Bigg[\\Delta_{2(h-1)}(x,y) \\vee\n \\exists x' \\exists y' \\bigg((x'\\geq s^h(z_1))\\wedge (s^h(x')\\leq z_2)\\wedge (s^h(y')\\leq z_2) \\wedge\n\\\\\n\\wedge\n(y'\\geq s^h(z_1)) \\wedge\n\\Delta_{2(h-1)+1}(x,x') \\wedge \\Delta_{2(h-1)+1}(y',y) \\wedge T_{x',y'}\\bigg(\\bigvee_{i=1}^N \\phi_i(x',y')\\bigg)\n\\bigg)\n\\Bigg]\n\\end{multline*}\n\\end{small}\nConstruct formula\n$\n\\Phi_2\\equiv\n\\Big[\\bigvee\\limits_{i=1}^{h-1} x = s^i(z_1) \\Big]\\wedge\n\\Big[\\bigvee\\limits_{i=1}^{h-1} y = s^i(z_1) \\Big]\\wedge \\Gamma\n$.\n\nThe remaining cases $I(x)\\in (I(z_2)-h,I(z_2))\\wedge I(y)\\in (I(z_2)-h,I(z_2))$, $I(x)\\in (I(z_1),I(z_1)+h)\\wedge I(y)\\in (I(z_2)-h,I(z_2))$, $I(y)\\in (I(z_1),I(z_1)+h)\\wedge I(x) \\in (I(z_2)-h,I(z_2))$ are considered similarly and formulas $\\Phi_3$,$\\Phi_4$ and $\\Phi_4'$ are constructed respectively.\nLet\n\\begin{small}\n\\begin{multline*}\n\\Omega_1 \\equiv \\Bigg[\\Delta_{2(h-1)}(x,y) \\vee\n\\exists x' \\bigg((x'\\geq s^h(z_1))\\wedge (s^h(x')\\leq z_2)\\wedge\n\\\\\n\\wedge\n\\Delta_{2(h-1)+1}(x,x') \\wedge T_{x',y}\\bigg(\\bigvee_{i=1}^N \\phi_i(x',y)\\bigg)\\bigg)\\Bigg],\n\\end{multline*}\n\\begin{multline*}\n\\Omega_2 \\equiv \\Bigg[\\Delta_{2(h-1)}(x,y) \\vee\n\\vee \\exists x' \\bigg((x'\\geq s^h(z_1))\\wedge (s^h(x')\\leq z_2)\\wedge\n\\\\\n\\wedge\n\\Delta_{2(h-1)+1}(x',y) \\wedge T_{x,x'}\\bigg(\\bigvee_{i=1}^N \\phi_i(x,x')\\bigg)\\bigg)\\Bigg].\n\\end{multline*}\n\\end{small}\nLet $I(x) \\in (I(z_1),I(z_1)+h)$ and\n$I(z_1)+h \\leq I(y)\\leq I(z_2)-h$. Construct a formula\n$\\Phi_5\\equiv\n\\Big[\\bigvee\\limits_{i=1}^{h-1} x = s^i(z_1) \\Big]\\wedge\n\\Big[(s^h(z_1)\\leq y)\\wedge(s^h(y)\\geq z_2)\\Big]\\wedge \\Omega_1\n$.\n\nThe remaining cases $I(x) \\in (I(z_2)-h,I(z_2)) \\wedge I(z_1)+h \\leq I(y)\\leq I(z_2)-h$, $I(y) \\in (I(z_2)-h,I(z_2))\\wedge I(z_1)+h \\leq I(x)\\leq I(z_2)-h$, $I(y) \\in (I(z_1),I(z_1)+h)\\wedge I(z_1)+h \\leq I(x)\\leq I(z_2)-h$  are considered similarly $\\Phi_5'$, $\\Phi_6$ and $\\Phi_6'$ are constructed. In both $\\Phi_6$ and $\\Phi_6'$ the formula $\\Omega_2$ is used instead of $\\Omega_1$.\nThus we have considered all of the cases. The resulting formula is the following:\n\\begin{small}\n\\begin{multline*}\n\\Bigg(\n(s^{3h}(z_1)<z_2) \\wedge P(x) \\wedge P(y) \\wedge\n\\Bigg(\n(x=y)\\vee\n\\\\\n\\vee\n(\\Phi_1\\vee \\Phi_2\\vee\\Phi_3\\vee\\Phi_4\\vee\\Phi'_4\\vee \\Phi_5\\vee \\Phi'_5\\vee \\Phi_6\\vee\\Phi'_6)\\bigg] \\Bigg)\n\\Bigg)\\vee\n\\\\\n\\vee\n\\bigvee\\limits_{l=1}^{3h} \\Bigg(s^i(z_1) = z_2\n\\wedge T_{x,y}\\bigg(\\bigvee_{i=1}^N \\bigg[\\phi_i(x,y)\\wedge \\bigvee\\limits_{j=1}^{l-1} x = s^j(z_1)\\wedge \\bigvee\\limits_{j=1}^{l-1} y = s^j(z_1)\\bigg]\\bigg)\\Bigg).\n\\end{multline*}\n\\end{small}\n\\end{proof}\nNow we can prove our main result.\n\\begin{theorem}\nThe theory of integers with a successor function, divisibility predicates, the order relation and the transitive closure operator on one pair of variables is decidable.\n\\end{theorem}\\begin{proof}\nA way to effectively eliminate transitive closure operator is given in \\cite{zolotov1} and lemmas \\ref{lemma:first}-\\ref{lemma:last}. Therefore the theory is decidable because Presburger arithmetic is decidable (\\cite{boolos}).\n\\end{proof}"
        ]
    },
    "errors": []
}